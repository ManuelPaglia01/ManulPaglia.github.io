<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Security-Policy" content="default-src * self blob: data: gap:; style-src * self 'unsafe-inline' blob: data: gap:; script-src * 'self' 'unsafe-eval' 'unsafe-inline' blob: data: gap:; object-src * 'self' blob: data: gap:; img-src * self 'unsafe-inline' blob: data: gap:; connect-src self * 'unsafe-inline' blob: data: gap:; frame-src * self blob: data: gap:;">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <link rel="stylesheet" href="css/index.css">
        <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
        <title>Hello World</title>
    </head>
    <body>
        <!--APPLICATION CONTENT-->
        <header>
                <img src="img/CDS.png" alt="">
          

        </header>

        <main>

            <section class="pages">

                <div class="page is-active" data-page="3">
                    <div class="cont">
                        <div class="content page-3">
                            <div class="titoli">
                                <h1 style="font-size: 3em;">Registrazione</h1>
                                <p style="font-size: 1.5em;">Inserisci la password</p>
                            </div>
                            <div class="spazio-s"></div>
                            <div class="debito-form">
                                <form>
                                    <div class="input-c">
                                        <input type="password" placeholder="password " id="pasword" name="password" required>

        
                                    </div>

                                    <div class="spazio"></div>
                                    <div class="input-c">
                                        <input type="password" placeholder="ripeti password" id="ripeti_pasword" name="password" required>
                                    </div>

                                    <div class="spazio"></div>
                                    <div class="invio">
                                        <input type="button" value="avanti" id="avanti">
                                    </div>
                                    <div class="spazio-s"></div>
                                    <div class="input-c" style="text-align: center;">
                                        <p id="response"></p>
                                    </div>
                                   
                                </form>
                            </div>
                            <div class="link-reg">
                                <p>clicca <a href="index.html">qui</a> per tornare al login</p>

                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <!--BOTTOM NAVIGATION-BAR-->
        <div class="tabs" style="background-color: #75b4c7;">

        </div>
        <script src="https://code.jquery.com/jquery-2.1.0.min.js" integrity="sha256-8oQ1OnzE2X9v4gpRVRMb1DWHoPHJilbur1LP9ykQ9H0=" crossorigin="anonymous"></script>
        <script type="text/javascript">
        $(document).ready(function(){
            $("#avanti").on('click', function(){
                var password = $("#pasword").val();
                var ripeti_pasword = $("#ripeti_pasword").val();
                
                if (password=="" || ripeti_pasword==""){
                    alert("inserisci tutti i campi");
                }else{
                    console.log("tutti i campi inseriti");
                }
                if (password==ripeti_pasword){
                    document.getElementById("ripeti_pasword").style.border="2px solid #9e9e9e";
                    document.getElementById("ripeti_pasword").style.backgroundColor="E8F0FE";
                    
                    console.log("password inserite correttamente");
                    $.ajax({
                    url: 'password.php',
                    method: 'POST',
                    data: {
                        login: 1,
                        passwordPHP: password,
                    },
                    success: function(response){
                        $("#response").html(response);
                        console.log(response);
                    
                        
                        if(response=='<h2 style="color: green;">Password registrata</h2>')

                            setTimeout(function(){
                                window.location = 'index.html';
                            }, 1000);
                            
                            
                    },
                    dataType: 'text'
                });
                    
                }else{
                    alert("Password inserita diversa");
                    document.getElementById("ripeti_pasword").style.border="2px solid #bf4040";
                    document.getElementById("ripeti_pasword").style.backgroundColor="rgba(224, 3, 3, 0.12)";
                }

            });

        });

        </script>

        <!-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------></script>
    </body>
</html>
